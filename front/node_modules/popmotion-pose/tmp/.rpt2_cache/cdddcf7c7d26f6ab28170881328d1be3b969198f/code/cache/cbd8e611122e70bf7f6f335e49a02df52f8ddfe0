{"code":"import * as tslib_1 from \"tslib\";\r\nimport poseFactory from '../factories/pose';\r\nimport createDimensions from './dimensions';\r\nimport appendEventListeners from './events';\r\nimport { flipPose, isFlipPose } from './flip';\r\nimport { styler, Action, ValueReaction } from 'popmotion';\r\nexport { Action, ValueReaction };\r\nvar dragPoses = function (draggable) {\r\n    var dragging = {\r\n        preTransition: function (_a) {\r\n            var dimensions = _a.dimensions;\r\n            return dimensions.measure();\r\n        }\r\n    };\r\n    var dragEnd = {};\r\n    if (draggable === true || draggable === 'x')\r\n        dragging.x = dragEnd.x = 0;\r\n    if (draggable === true || draggable === 'y')\r\n        dragging.y = dragEnd.y = 0;\r\n    return { dragging: dragging, dragEnd: dragEnd };\r\n};\r\nvar createPoseConfig = function (element, _a) {\r\n    var onDragStart = _a.onDragStart, onDragEnd = _a.onDragEnd, draggable = _a.draggable, dragBounds = _a.dragBounds, config = tslib_1.__rest(_a, [\"onDragStart\", \"onDragEnd\", \"draggable\", \"dragBounds\"]);\r\n    var poseConfig = tslib_1.__assign({ flip: {} }, config, { props: tslib_1.__assign({}, config.props, { draggable: draggable,\r\n            onDragStart: onDragStart,\r\n            onDragEnd: onDragEnd,\r\n            dragBounds: dragBounds,\r\n            element: element, elementStyler: styler(element, { preparseOutput: false }), dimensions: createDimensions(element) }) });\r\n    if (draggable) {\r\n        var _b = dragPoses(draggable), dragging = _b.dragging, dragEnd = _b.dragEnd;\r\n        poseConfig.dragging = tslib_1.__assign({}, poseConfig.dragging, dragging);\r\n        poseConfig.dragEnd = tslib_1.__assign({}, poseConfig.dragEnd, dragEnd);\r\n    }\r\n    return poseConfig;\r\n};\r\nvar domPose = poseFactory({\r\n    transformPose: function (_a, name, state) {\r\n        var flip = _a.flip, pose = tslib_1.__rest(_a, [\"flip\"]);\r\n        return isFlipPose(flip, name, state) ? flipPose(state, pose) : pose;\r\n    },\r\n    addListenerToValue: function (key, elementStyler) { return function (v) { return elementStyler.set(key, v); }; },\r\n    readValueFromSource: function (key, _a) {\r\n        var elementStyler = _a.elementStyler;\r\n        var value = elementStyler.get(key);\r\n        return isNaN(value) ? value : parseFloat(value);\r\n    },\r\n    extendAPI: function (api, _a, config) {\r\n        var props = _a.props, activeActions = _a.activeActions;\r\n        var measure = props.dimensions.measure;\r\n        var poserApi = tslib_1.__assign({}, api, { addChild: function (element, childConfig) {\r\n                return api._addChild(createPoseConfig(element, childConfig), domPose);\r\n            }, measure: measure, flip: function (op) {\r\n                if (op) {\r\n                    measure();\r\n                    op();\r\n                }\r\n                return api.set('flip');\r\n            } });\r\n        appendEventListeners(props.element, activeActions, api.set, config);\r\n        return poserApi;\r\n    }\r\n});\r\nexport default (function (element, config) {\r\n    return domPose(createPoseConfig(element, config));\r\n});\r\n//# sourceMappingURL=pose.js.map","map":"{\"version\":3,\"file\":\"pose.js\",\"sourceRoot\":\"\",\"sources\":[\"../src/dom/pose.ts\"],\"names\":[],\"mappings\":\"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\"}"}
