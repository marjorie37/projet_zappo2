{"ast":null,"code":"import _classCallCheck from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/findev/Documents/lyon-0218-js-zappo/front/src/components/ZappoOrdersTablette/OrderNavButton.js\";\nimport React, { Component } from \"react\";\nimport { StyledNavigation } from \"../../styled/StyledOrdersNav\";\nimport Sound from \"react-sound\";\nimport { Grid, Typography, Button, IconButton, Modal, Paper, withStyles, Dialog, DialogTitle, DialogContent, DialogActions, DialogContentText, Slide } from \"@material-ui/core\";\nimport { PhonelinkLock, PhonelinkRing } from \"@material-ui/icons\";\nimport Slider from \"@material-ui/lab/Slider\";\nimport sound from \"../../assets/sounds/quite-impressed.mp3\";\nimport { PowerButton } from \"./svg/PowerButton\";\nimport axios from \"axios\";\nimport config from \"../../assets/lib/axiosStaff\";\nimport io from \"socket.io-client\";\nvar socket = io(\"http://localhost:5000\");\n\nvar Transition = function Transition(props) {\n  return React.createElement(Slide, Object.assign({\n    direction: \"up\"\n  }, props, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }));\n};\n\nvar style = {\n  color: \"white\",\n  fontSize: \"30px\",\n  marginRight: \"10px\"\n};\n\nvar styles = function styles(theme) {\n  return {\n    expand: {\n      transform: \"rotate(0deg)\",\n      transition: theme.transitions.create(\"transform\", {\n        duration: theme.transitions.duration.shortest\n      }),\n      expandOpen: {\n        transform: \"rotate(180deg)\"\n      }\n    }\n  };\n};\n\nvar OrderNavButton =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(OrderNavButton, _Component);\n\n  function OrderNavButton(props) {\n    var _this;\n\n    _classCallCheck(this, OrderNavButton);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(OrderNavButton).call(this, props));\n\n    _this.handleOpenDelay = function () {\n      _this.setState({\n        openDelay: true\n      });\n    };\n\n    _this.handleCloseDelay = function () {\n      _this.setState({\n        openDelay: false\n      });\n    };\n\n    _this.handleOpenPanic = function () {\n      _this.setState({\n        openPanic: true\n      });\n    };\n\n    _this.handleChangePanicMode = function () {\n      var panic = _this.state.panic;\n      panic ? socket.emit(\"warning\", panic) : socket.emit(\"warning\", panic);\n\n      _this.setState({\n        panic: !panic\n      });\n    };\n\n    _this.handleClosePanic = function () {\n      _this.setState({\n        openPanic: false\n      });\n    };\n\n    _this.handleChange = function (event, value) {\n      axios(config({\n        time: value\n      }, \"/orderdelay/1\", \"post\")).then(function (res) {\n        var _res$data = res.data,\n            success = _res$data.success,\n            error = _res$data.error;\n\n        if (success) {\n          _this.setState({\n            value: value\n          });\n        }\n\n        if (error) {\n          console.log(error);\n        }\n      });\n    };\n\n    _this.state = {\n      value: 20,\n      openDelay: false,\n      controlled: false,\n      position: 0,\n      volume: 100,\n      playbackRate: 1,\n      loop: true,\n      //playStatus: Sound.status.PLAYING,\n      openPanic: false,\n      panic: false\n    };\n    _this.handleOpenDelay = _this.handleOpenDelay.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleCloseDelay = _this.handleCloseDelay.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleOpenPanic = _this.handleOpenPanic.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleClosePanic = _this.handleClosePanic.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChangePanicMode = _this.handleChangePanicMode.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(OrderNavButton, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios(config({}, \"/orderdelay/1\", \"get\")).then(function (res) {\n        var _res$data2 = res.data,\n            success = _res$data2.success,\n            error = _res$data2.error;\n\n        if (success) {\n          _this2.setState({\n            value: success\n          });\n        } else if (error) {\n          console.log(error);\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var value = this.state.value;\n      var _this$props = this.props,\n          hiddenDelay = _this$props.hiddenDelay,\n          user = _this$props.user;\n      var buttonDelay = \"\";\n\n      if (!hiddenDelay) {\n        buttonDelay = React.createElement(Button, {\n          onClick: this.handleOpenDelay,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          variant: \"subheading\",\n          style: {\n            color: \"#fff\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, \"D\\xE9lai annonc\\xE9 : \", value, \" minutes\")));\n      }\n\n      var panicIconColor = this.state.panic === false ? \"inherit\" : \"secondary\";\n      return React.createElement(StyledNavigation, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(Sound, {\n        url: sound,\n        playStatus: this.props.pending === true ? Sound.status.PLAYING : Sound.status.STOPPED,\n        loop: this.state.loop //playFromPosition={this.state.position}\n        //volume={this.state.volume}\n        //playbackRate={this.state.playbackRate}\n        // onLoading={({ bytesLoaded, bytesTotal }) =>\n        //   console.log(`${(bytesLoaded / bytesTotal) * 100}% loaded`)\n        // }\n        // onLoad={() => console.log(\"Loaded\")}\n        // onPlaying={({ position }) => console.log(\"Position\", position)}\n        // onStop={() => console.log(\"Stopped\")}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }), React.createElement(Dialog, {\n        open: this.state.openPanic,\n        TransitionComponent: Transition,\n        keepMounted: true,\n        onClose: this.handleClosePanic,\n        \"aria-labelledby\": \"alert-panic-mode\",\n        \"aria-describedby\": \"alert-dialog-slide-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        id: \"alert-panic-mode\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, this.state.panic === false ? \"Désactiver l'application\" : \"Ré-activer l'application\"), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(DialogContentText, {\n        id: \"alert-dialog-slide-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, this.state.panic === false ? \"Voulez vous r\\xE9ellement suspendre l'acc\\xE8s \\xE0 l'application ? Les\\n              clients ne pourront pas faire de commandes tant que l'application\\n              sera suspendue.\" : \"Si vous r\\xE9activez l'acc\\xE8s \\xE0 l'application, les\\n              clients pourront \\xE0 nouveau passer des commandes.\")), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(Button, {\n        fullwidth: \"true\",\n        variant: \"contained\",\n        color: \"secondary\",\n        onClick: this.handleChangePanicMode,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, this.state.panic === false ? \"Suspendre l'application\" : \"Ré-activer l'application\"))), React.createElement(Modal, {\n        \"aria-labelledby\": \"modale delay\",\n        \"aria-describedby\": \"modification du param\\xE8tre delay en base\",\n        open: this.state.openDelay,\n        onClose: this.handleCloseDelay,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(Paper, {\n        style: {\n          position: \"absolute\",\n          textAlign: \"center\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          width: \"50%\",\n          boxShadow: \"5px 5px 10px #000\",\n          padding: \"30px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"display1\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, \"d\\xE9lai annonc\\xE9 :\"), React.createElement(Typography, {\n        variant: \"display3\",\n        color: \"primary\",\n        gutterBottom: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, value, \" minutes\"), React.createElement(Typography, {\n        variant: \"subheading\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, \"Vous pouvez r\\xE9gler ici le temps annonc\\xE9 aux clients pour la r\\xE9alisation de leur commande.\"), React.createElement(Slider, {\n        style: {\n          marginTop: \"50px\"\n        },\n        value: value,\n        min: 10,\n        max: 60,\n        step: 10,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }))), React.createElement(Grid, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"subheading\",\n        style: {\n          marginLeft: \"10px\",\n          color: \"#fff\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        onClick: this.handleOpenPanic,\n        color: panicIconColor,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, this.state.panic === false ? React.createElement(PhonelinkRing, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }) : React.createElement(PhonelinkLock, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      })), \"Zappo | Commandes \\xE0 emporter\")), React.createElement(Grid, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, buttonDelay), React.createElement(Grid, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, user === null ? \"\" : React.createElement(PowerButton, {\n        style: style,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      })));\n    }\n    /**\n     *  ------------------ FONCTIONS --------------------\n     */\n\n  }]);\n\n  return OrderNavButton;\n}(Component);\n\nexport default withStyles(styles)(OrderNavButton);","map":{"version":3,"sources":["/home/findev/Documents/lyon-0218-js-zappo/front/src/components/ZappoOrdersTablette/OrderNavButton.js"],"names":["React","Component","StyledNavigation","Sound","Grid","Typography","Button","IconButton","Modal","Paper","withStyles","Dialog","DialogTitle","DialogContent","DialogActions","DialogContentText","Slide","PhonelinkLock","PhonelinkRing","Slider","sound","PowerButton","axios","config","io","socket","Transition","props","style","color","fontSize","marginRight","styles","theme","expand","transform","transition","transitions","create","duration","shortest","expandOpen","OrderNavButton","handleOpenDelay","setState","openDelay","handleCloseDelay","handleOpenPanic","openPanic","handleChangePanicMode","panic","state","emit","handleClosePanic","handleChange","event","value","time","then","res","data","success","error","console","log","controlled","position","volume","playbackRate","loop","bind","hiddenDelay","user","buttonDelay","panicIconColor","pending","status","PLAYING","STOPPED","textAlign","top","left","width","boxShadow","padding","marginTop","marginLeft"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { StyledNavigation } from \"../../styled/StyledOrdersNav\";\nimport Sound from \"react-sound\";\nimport {\n  Grid,\n  Typography,\n  Button,\n  IconButton,\n  Modal,\n  Paper,\n  withStyles,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  DialogContentText,\n  Slide\n} from \"@material-ui/core\";\nimport { PhonelinkLock, PhonelinkRing } from \"@material-ui/icons\";\nimport Slider from \"@material-ui/lab/Slider\";\nimport sound from \"../../assets/sounds/quite-impressed.mp3\";\nimport { PowerButton } from \"./svg/PowerButton\";\n\nimport axios from \"axios\";\nimport config from \"../../assets/lib/axiosStaff\";\n\nimport io from \"socket.io-client\";\n\nconst socket = io(\"http://localhost:5000\");\n\nconst Transition = props => <Slide direction=\"up\" {...props} />;\n\nconst style = {\n  color: \"white\",\n  fontSize: \"30px\",\n  marginRight: \"10px\"\n};\n\nconst styles = theme => ({\n  expand: {\n    transform: \"rotate(0deg)\",\n    transition: theme.transitions.create(\"transform\", {\n      duration: theme.transitions.duration.shortest\n    }),\n    expandOpen: {\n      transform: \"rotate(180deg)\"\n    }\n  }\n});\nclass OrderNavButton extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: 20,\n      openDelay: false,\n      controlled: false,\n      position: 0,\n      volume: 100,\n      playbackRate: 1,\n      loop: true,\n      //playStatus: Sound.status.PLAYING,\n      openPanic: false,\n      panic: false\n    };\n    this.handleOpenDelay = this.handleOpenDelay.bind(this);\n    this.handleCloseDelay = this.handleCloseDelay.bind(this);\n    this.handleOpenPanic = this.handleOpenPanic.bind(this);\n    this.handleClosePanic = this.handleClosePanic.bind(this);\n    this.handleChangePanicMode = this.handleChangePanicMode.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  componentDidMount() {\n    axios(config({}, \"/orderdelay/1\", \"get\")).then(res => {\n      const { success, error } = res.data;\n      if (success) {\n        this.setState({ value: success });\n      } else if (error) {\n        console.log(error)\n      }\n    });\n  }\n\n  render() {\n    const { value } = this.state;\n    const { hiddenDelay, user } = this.props;\n    let buttonDelay = \"\";\n    if (!hiddenDelay) {\n      buttonDelay = (\n        <Button onClick={this.handleOpenDelay}>\n          <Typography variant=\"subheading\" style={{ color: \"#fff\" }}>\n            <strong>Délai annoncé : {value} minutes</strong>\n          </Typography>\n        </Button>\n      );\n    }\n    const panicIconColor = this.state.panic === false ? \"inherit\" : \"secondary\";\n    return (\n      <StyledNavigation>\n        <Sound\n          url={sound}\n          playStatus={\n            this.props.pending === true\n              ? Sound.status.PLAYING\n              : Sound.status.STOPPED\n          }\n          loop={this.state.loop}\n          //playFromPosition={this.state.position}\n          //volume={this.state.volume}\n          //playbackRate={this.state.playbackRate}\n\n          // onLoading={({ bytesLoaded, bytesTotal }) =>\n          //   console.log(`${(bytesLoaded / bytesTotal) * 100}% loaded`)\n          // }\n          // onLoad={() => console.log(\"Loaded\")}\n          // onPlaying={({ position }) => console.log(\"Position\", position)}\n          // onStop={() => console.log(\"Stopped\")}\n        />\n        <Dialog\n          open={this.state.openPanic}\n          TransitionComponent={Transition}\n          keepMounted\n          onClose={this.handleClosePanic}\n          aria-labelledby=\"alert-panic-mode\"\n          aria-describedby=\"alert-dialog-slide-description\"\n        >\n          <DialogTitle id=\"alert-panic-mode\">\n            {this.state.panic === false\n              ? \"Désactiver l'application\"\n              : \"Ré-activer l'application\"}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText id=\"alert-dialog-slide-description\">\n              {this.state.panic === false\n                ? `Voulez vous réellement suspendre l'accès à l'application ? Les\n              clients ne pourront pas faire de commandes tant que l'application\n              sera suspendue.`\n                : `Si vous réactivez l'accès à l'application, les\n              clients pourront à nouveau passer des commandes.`}\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button\n              fullwidth=\"true\"\n              variant=\"contained\"\n              color=\"secondary\"\n              onClick={this.handleChangePanicMode}\n            >\n              {this.state.panic === false\n                ? `Suspendre l'application`\n                : \"Ré-activer l'application\"}\n            </Button>\n          </DialogActions>\n        </Dialog>\n        <Modal\n          aria-labelledby=\"modale delay\"\n          aria-describedby=\"modification du paramètre delay en base\"\n          open={this.state.openDelay}\n          onClose={this.handleCloseDelay}\n        >\n          <Paper\n            style={{\n              position: \"absolute\",\n              textAlign: \"center\",\n              top: \"50%\",\n              left: \"50%\",\n              transform: `translate(-50%, -50%)`,\n              width: \"50%\",\n              boxShadow: \"5px 5px 10px #000\",\n              padding: \"30px\"\n            }}\n          >\n            <Typography variant=\"display1\" color=\"primary\">\n              délai annoncé :\n            </Typography>\n            <Typography variant=\"display3\" color=\"primary\" gutterBottom>\n              {value} minutes\n            </Typography>\n            <Typography variant=\"subheading\" color=\"primary\">\n              Vous pouvez régler ici le temps annoncé aux clients pour la\n              réalisation de leur commande.\n            </Typography>\n            <Slider\n              style={{ marginTop: \"50px\" }}\n              value={value}\n              min={10}\n              max={60}\n              step={10}\n              onChange={this.handleChange}\n            />\n          </Paper>\n        </Modal>\n        <Grid>\n          <Typography\n            variant=\"subheading\"\n            style={{ marginLeft: \"10px\", color: \"#fff\" }}\n          >\n            <IconButton onClick={this.handleOpenPanic} color={panicIconColor}>\n              {this.state.panic === false ? (\n                <PhonelinkRing />\n              ) : (\n                <PhonelinkLock />\n              )}\n            </IconButton>\n            Zappo | Commandes à emporter\n          </Typography>\n        </Grid>\n        <Grid>{buttonDelay}</Grid>\n        <Grid>{user === null ? \"\" : <PowerButton style={style} />}</Grid>\n      </StyledNavigation>\n    );\n  }\n\n  /**\n   *  ------------------ FONCTIONS --------------------\n   */\n\n  handleOpenDelay = () => {\n    this.setState({ openDelay: true });\n  };\n\n  handleCloseDelay = () => {\n    this.setState({ openDelay: false });\n  };\n\n  handleOpenPanic = () => {\n    this.setState({ openPanic: true });\n  };\n  handleChangePanicMode = () => {\n    const { panic } = this.state;\n    panic ? socket.emit(\"warning\", panic) : socket.emit(\"warning\", panic);\n    this.setState({ panic: !panic });\n  };\n\n  handleClosePanic = () => {\n    this.setState({ openPanic: false });\n  };\n\n  handleChange = (event, value) => {\n    axios(config({ time: value }, \"/orderdelay/1\", \"post\")).then(res => {\n      const { success, error } = res.data;\n      if (success) {\n        this.setState({ value });\n      }\n      if (error) {\n        console.log(error);\n      }\n    });\n  };\n}\n\nexport default withStyles(styles)(OrderNavButton);\n"]},"metadata":{},"sourceType":"module"}