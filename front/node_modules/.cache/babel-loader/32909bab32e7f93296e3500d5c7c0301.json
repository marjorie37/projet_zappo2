{"ast":null,"code":"import _defineProperty from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/findev/Documents/lyon-0218-js-zappo/front/src/components/StripeComponents/CheckOutForm.js\";\nimport React from \"react\";\nimport { injectStripe } from \"react-stripe-elements\";\nimport axios from \"axios\";\nimport config from \"../../assets/lib/axiosConfig\";\nimport CardSection from \"./CardSection\";\nimport { Grid, Button, Input, FormControl, InputLabel, Snackbar, Fade } from \"@material-ui/core\";\nimport moment from \"moment\";\n\nvar CheckoutForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CheckoutForm, _React$Component);\n\n  function CheckoutForm(props) {\n    var _this;\n\n    _classCallCheck(this, CheckoutForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CheckoutForm).call(this, props));\n    _this.state = {\n      comments: \"\",\n      message: null\n    };\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(CheckoutForm, [{\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      this.props.stripe.createToken().then(function (_ref) {\n        var token = _ref.token;\n        axios(config({\n          token: token,\n          cart: localStorage.getItem(\"cart\"),\n          dateOrder: localStorage.getItem(\"dateOrder\"),\n          dateNow: moment().format(),\n          time: localStorage.getItem(\"dateTime\"),\n          points: localStorage.getItem(\"fidelity\"),\n          amount: Math.round(localStorage.getItem(\"TTC\") * 100),\n          amountHT: localStorage.getItem(\"HT\"),\n          comments: _this2.state.comments\n        }, \"/payment\", \"POST\")).then(function (res) {\n          var _res$data = res.data,\n              success = _res$data.success,\n              err = _res$data.err,\n              message = _res$data.message;\n\n          if (success) {\n            _this2.props.history.push(\"/buon-appetito\");\n          }\n\n          if (message) {\n            _this2.setState({\n              message: message\n            });\n          }\n\n          if (err) {\n            _this2.setState({\n              message: err\n            });\n          }\n        }).catch(function (err) {\n          return console.log(err);\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(e) {\n      this.setState(_defineProperty({}, e.target.name, e.target.value));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        justify: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        md: 6,\n        xs: 12,\n        style: {\n          margin: \"20px 10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(CardSection, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        md: 6,\n        xs: 12,\n        style: {\n          margin: \"0 10px\",\n          padding: 10,\n          background: \"white\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        fullWidth: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        htmlFor: \"commentsInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \"Un commentaire pour notre pizza\\xEFolo ?\"), React.createElement(Input, {\n        id: \"commentsInput\",\n        multiline: true,\n        rows: 3,\n        type: \"text\",\n        name: \"comments\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }))), React.createElement(Grid, {\n        item: true,\n        md: 6,\n        xs: 12,\n        style: {\n          margin: \"20px 10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(Button, {\n        fullWidth: true,\n        variant: \"contained\",\n        size: \"large\",\n        color: \"secondary\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Valider\"))), React.createElement(Snackbar, {\n        open: this.state.message !== null ? true : false,\n        autoHideDuration: 3000,\n        onClose: function onClose() {\n          return _this3.setState({\n            message: null\n          });\n        },\n        TransitionComponent: Fade,\n        ContentProps: {\n          \"aria-describedby\": \"message-id\"\n        },\n        message: React.createElement(\"span\", {\n          id: \"message-id\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, this.state.message),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return CheckoutForm;\n}(React.Component);\n\nexport default injectStripe(CheckoutForm);","map":{"version":3,"sources":["/home/findev/Documents/lyon-0218-js-zappo/front/src/components/StripeComponents/CheckOutForm.js"],"names":["React","injectStripe","axios","config","CardSection","Grid","Button","Input","FormControl","InputLabel","Snackbar","Fade","moment","CheckoutForm","props","state","comments","message","handleSubmit","bind","handleChange","e","preventDefault","stripe","createToken","then","token","cart","localStorage","getItem","dateOrder","dateNow","format","time","points","amount","Math","round","amountHT","res","data","success","err","history","push","setState","catch","console","log","target","name","value","margin","padding","background","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { injectStripe } from \"react-stripe-elements\";\nimport axios from \"axios\";\nimport config from \"../../assets/lib/axiosConfig\";\nimport CardSection from \"./CardSection\";\nimport {\n  Grid,\n  Button,\n  Input,\n  FormControl,\n  InputLabel,\n  Snackbar,\n  Fade\n} from \"@material-ui/core\";\nimport moment from \"moment\";\n\nclass CheckoutForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      comments: \"\",\n      message: null\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    this.props.stripe\n      .createToken()\n      .then(({ token }) => {\n        axios(\n          config(\n            {\n              token,\n              cart: localStorage.getItem(\"cart\"),\n              dateOrder: localStorage.getItem(\"dateOrder\"),\n              dateNow: moment().format(),\n              time: localStorage.getItem(\"dateTime\"),\n              points: localStorage.getItem(\"fidelity\"),\n              amount: Math.round(localStorage.getItem(\"TTC\") * 100),\n              amountHT: localStorage.getItem(\"HT\"),\n              comments: this.state.comments\n            },\n            \"/payment\",\n            \"POST\"\n          )\n        )\n          .then(res => {\n            const { success, err, message } = res.data;\n            if (success) {\n              this.props.history.push(\"/buon-appetito\");\n            }\n            if (message) {\n              this.setState({ message });\n            }\n            if (err) {\n              this.setState({ message: err });\n            }\n          })\n          .catch(err => console.log(err));\n      })\n      .catch(err => console.log(err));\n  }\n\n  handleChange(e) {\n    this.setState({ [e.target.name]: e.target.value });\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <Grid container justify=\"center\">\n          <Grid item md={6} xs={12} style={{ margin: \"20px 10px\" }}>\n              <CardSection />\n          </Grid>\n          <Grid\n            item\n            md={6}\n            xs={12}\n            style={{ margin: \"0 10px\", padding: 10, background: \"white\" }}\n          >\n            <FormControl fullWidth>\n              <InputLabel htmlFor=\"commentsInput\">\n                Un commentaire pour notre pizza√Øolo ?\n              </InputLabel>\n              <Input\n                id=\"commentsInput\"\n                multiline\n                rows={3}\n                type=\"text\"\n                name=\"comments\"\n                onChange={this.handleChange}\n              />\n            </FormControl>\n          </Grid>\n          <Grid item md={6} xs={12} style={{ margin: \"20px 10px\" }}>\n            <Button\n              fullWidth\n              variant=\"contained\"\n              size=\"large\"\n              color=\"secondary\"\n              type=\"submit\"\n            >\n              Valider\n            </Button>\n          </Grid>\n        </Grid>\n        <Snackbar\n          open={this.state.message !== null ? true : false}\n          autoHideDuration={3000}\n          onClose={() => this.setState({ message: null })}\n          TransitionComponent={Fade}\n          ContentProps={{\n            \"aria-describedby\": \"message-id\"\n          }}\n          message={<span id=\"message-id\">{this.state.message}</span>}\n        />\n      </form>\n    );\n  }\n}\n\nexport default injectStripe(CheckoutForm);\n"]},"metadata":{},"sourceType":"module"}