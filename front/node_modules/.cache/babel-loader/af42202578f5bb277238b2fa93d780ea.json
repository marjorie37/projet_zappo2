{"ast":null,"code":"import _toConsumableArray from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/findev/Documents/lyon-0218-js-zappo/front/src/components/OrderBill.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport moment from \"moment\";\nimport { OrderBillChip } from \"../styled/Index\"; // MATERIAL UI\n\nimport { Paper, Grid, Button, Typography, Divider, List, ListItem, ListItemText, ListItemSecondaryAction, Icon } from \"@material-ui/core\";\nimport { Receipt } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport config from \"../assets/lib/axiosConfig\"; // ASSETS\n\nimport logoBill from \"../assets/img/zappoLogoSmall.png\";\n\nvar OrderBill =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(OrderBill, _Component);\n\n  function OrderBill(props) {\n    var _this;\n\n    _classCallCheck(this, OrderBill);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(OrderBill).call(this, props));\n    _this.state = {\n      order: {},\n      reductions: \"\",\n      zappoAddress: {\n        street: \"6 rue Challemel Lacour\",\n        cp: 69007,\n        city: \"Lyon\",\n        phone: \"04 72 71 79 88\"\n      }\n    };\n    _this.getNewPoints = _this.getNewPoints.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.fillTheList = _this.fillTheList.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getSubTotal = _this.getSubTotal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getReductions = _this.getReductions.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getTotalPrice = _this.getTotalPrice.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getTotalVatTen = _this.getTotalVatTen.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getTotalVatTwenty = _this.getTotalVatTwenty.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(OrderBill, [{\n    key: \"magicRound\",\n    value: function magicRound(number) {\n      var numberToRound = number * 100; // 556.845\n\n      numberToRound = Math.round(numberToRound); // 556\n\n      return numberToRound = numberToRound / 100;\n    }\n  }, {\n    key: \"getNewPoints\",\n    value: function getNewPoints() {\n      var pizzas = 0;\n\n      if (this.state.order.cart) {\n        this.state.order.cart.map(function (element) {\n          return element.category_id === 1 ? pizzas += element.quantity : null;\n        });\n        return pizzas;\n      }\n    }\n  }, {\n    key: \"backToCart\",\n    value: function backToCart() {\n      var cart = [];\n      cart = JSON.parse(localStorage.getItem(\"cart\"));\n      var cartItem = this.state.order.cart.map(function (r) {\n        return r.id;\n      });\n      var carts = cart.map(function (r) {\n        return r.id;\n      });\n      var index = cartItem.filter(function (val) {\n        return carts.indexOf(val) !== -1;\n      });\n      console.log(index, cartItem);\n\n      if (index.length === 0) {\n        cart = [].concat(_toConsumableArray(cart), _toConsumableArray(this.state.order.cart));\n      } else {\n        var i = index.map(function (i) {\n          return i;\n        });\n        cart = carts.map(function (c) {\n          return c === 1;\n        });\n      }\n    } // const index = carts.findIndex(elt => elt === cartItem);\n    // console.log(index);\n    // cart = [...this.state.order.cart, ...cart];\n    // localStorage.setItem(\"cart\", JSON.stringify(cart));\n    // const index = state.findIndex(el => el.item.title === action.item.title);\n    // if (index === -1) {\n    //   return [...state, { item: action.item, quantity: action.quantity + 1 }];\n    // } else {\n    //   return state.map((item, i) =>\n    //     index === i\n    //       ? {\n    //           ...item,\n    //           quantity: item.quantity + action.quantity + 1\n    //         }\n    //       : item\n    //   );\n    // }\n\n  }, {\n    key: \"fillTheList\",\n    value: function fillTheList() {\n      var _this2 = this;\n\n      var orderedProducts = this.state.order.cart;\n\n      if (orderedProducts) {\n        return orderedProducts.map(function (element, i) {\n          var allInclusivePrice = element.ttc_price;\n          var divider = element === orderedProducts[orderedProducts.length - 1] ? false : true;\n          return React.createElement(ListItem, {\n            divider: divider,\n            style: {\n              paddingLeft: \"0.4rem\"\n            },\n            key: i,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 105\n            },\n            __self: this\n          }, React.createElement(ListItemText, {\n            primary: \"\".concat(element.quantity, \" \").concat(element.name),\n            secondary: \"(Pu: \".concat(_this2.magicRound(allInclusivePrice), \"0)\"),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 106\n            },\n            __self: this\n          }), React.createElement(ListItemSecondaryAction, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 110\n            },\n            __self: this\n          }, React.createElement(Typography, {\n            gutterBottom: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 111\n            },\n            __self: this\n          }, \"\".concat(_this2.magicRound(allInclusivePrice * element.quantity), \"0 \\u20AC\"))));\n        });\n      }\n    }\n    /** Sous total de prix TTC avant calcul de reductions */\n\n  }, {\n    key: \"getSubTotal\",\n    value: function getSubTotal() {\n      var subTotal = 0;\n      this.state.order.cart.map(function (element) {\n        return subTotal += element.ttc_price * element.quantity;\n      });\n      return subTotal;\n    }\n    /** Total de réductions TTC */\n\n  }, {\n    key: \"getReductions\",\n    value: function getReductions() {\n      if (this.state.order.cart) {\n        var tab = [];\n        this.state.order.cart.forEach(function (elt) {\n          if (elt.free) {\n            tab.push(elt.ttc_price * elt.free);\n          }\n        });\n        return tab.length > 1 ? tab.reduce(function (a, b) {\n          return a + b;\n        }) : null;\n      }\n    }\n    /** Total des articles dont la TVA est 10 */\n\n  }, {\n    key: \"getTotalVatTen\",\n    value: function getTotalVatTen() {\n      var _this3 = this;\n\n      var tab = [];\n\n      if (this.state.order.cart) {\n        this.state.order.cart.forEach(function (element) {\n          if (element.tva === 10) {\n            tab.push(_this3.magicRound(element.ttc_price - element.ht_price) * element.quantity);\n          }\n        });\n        return tab.lenght >= 1 ? tab.reduce(function (a, b) {\n          return a + b;\n        }) : 0;\n      }\n    }\n    /** Total des articles dont la TVA est 20 */\n\n  }, {\n    key: \"getTotalVatTwenty\",\n    value: function getTotalVatTwenty() {\n      var _this4 = this;\n\n      var tab = [];\n\n      if (this.state.order.cart) {\n        this.state.order.cart.forEach(function (element) {\n          if (element.tva === 20) {\n            tab.push(_this4.magicRound(element.ttc_price - element.ht_price) * element.quantity);\n          }\n        });\n        return tab.length >= 1 ? tab.reduce(function (a, b) {\n          return a + b;\n        }) : 0;\n      }\n    }\n  }, {\n    key: \"getTotalHt\",\n    value: function getTotalHt() {\n      if (this.state.order.cart) {\n        var tab = this.state.order.cart.map(function (elt) {\n          return elt.ht_price * elt.quantity;\n        });\n        return tab.length > 1 ? tab.reduce(function (a, b) {\n          return a + b;\n        }) : 0;\n      }\n    }\n    /** Total net TTC (total moins les réductions éventuelles) */\n\n  }, {\n    key: \"getTotalPrice\",\n    value: function getTotalPrice() {\n      var cart = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var tabReduc = [];\n      var tab = [];\n      cart.forEach(function (elt) {\n        if (!elt.free) {\n          tabReduc.push(elt.free);\n        }\n\n        tab.push(elt.ttc_price * elt.quantity);\n      });\n      var reduc = tabReduc.length ? tabReduc.reduce(function (a, b) {\n        return a + b;\n      }, 0) : 0;\n      var total = tab.length ? tab.reduce(function (a, b) {\n        return a + b;\n      }) : 0;\n      return total - reduc;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this5 = this;\n\n      axios(config({}, \"/order/\".concat(this.props.orderId, \"/\").concat(this.props.user.id, \"/\"), \"get\")).then(function (res) {\n        _this5.setState({\n          order: res.data\n        });\n\n        _this5.props.order(res.data);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      var _this$state = this.state,\n          order = _this$state.order,\n          zappoAddress = _this$state.zappoAddress;\n      return React.createElement(Grid, {\n        container: true,\n        justify: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 11,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, order && React.createElement(Paper, {\n        style: {\n          marginTop: \"1rem\",\n          padding: \"15px\",\n          marginBottom: \"1rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(Button, {\n        component: Link,\n        onClick: function onClick() {\n          return _this6.backToCart();\n        },\n        to: \"#\",\n        fullWidth: true,\n        variant: \"contained\",\n        size: \"large\",\n        color: \"secondary\",\n        style: {\n          marginBottom: \"15px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, \"Remettre au panier\"), React.createElement(Grid, {\n        container: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        align: \"left\",\n        variant: \"body1\",\n        gutterBottom: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, \"N\\xB0\", order.uid)), React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        align: \"right\",\n        variant: \"body1\",\n        gutterBottom: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, moment(order.pending_time).format(\"dddd DD MMMM à LT\")))), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }), React.createElement(Grid, {\n        container: true,\n        spacing: 8,\n        style: {\n          marginTop: \"0.5rem\"\n        },\n        alignItems: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: logoBill,\n        alt: \"Zappo\",\n        style: {\n          width: \"100%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        xs: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        align: \"left\",\n        variant: \"caption\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, zappoAddress.street, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }), zappoAddress.cp, \" \", zappoAddress.city, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }), zappoAddress.phone))), React.createElement(Grid, {\n        container: true,\n        alignItems: \"center\",\n        style: {\n          marginTop: \"1rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }), React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        align: \"left\",\n        variant: \"body1\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        style: {\n          textAlign: \"baseline\",\n          fontSize: \"0.9rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, \"local_pizza\"), React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, \"+ \", this.getNewPoints(), \" pts\"))), React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, React.createElement(OrderBillChip, {\n        label: \" \".concat(this.state.order.totalTTC, \"0 \\u20AC\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, React.createElement(List, {\n        dense: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, this.fillTheList(), \" \"), React.createElement(List, {\n        dense: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, React.createElement(ListItem, {\n        divider: true,\n        style: {\n          paddingLeft: \"0.4rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, React.createElement(ListItemText, {\n        primary: \"Sous-Total\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }), React.createElement(ListItemSecondaryAction, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        gutterBottom: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, \"\".concat(this.state.order.totalTTC, \"0\"), \" \\u20AC\"))), React.createElement(ListItem, {\n        divider: true,\n        style: {\n          paddingLeft: \"0.4rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292\n        },\n        __self: this\n      }, React.createElement(ListItemText, {\n        primary: \"R\\xE9duction\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }), React.createElement(ListItemSecondaryAction, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        gutterBottom: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, \"0 \\u20AC\"))), React.createElement(ListItem, {\n        divider: true,\n        style: {\n          paddingLeft: \"0.4rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, React.createElement(ListItemText, {\n        primary: React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 302\n          },\n          __self: this\n        }, \"Total TTC\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }), React.createElement(ListItemSecondaryAction, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        gutterBottom: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, \"\".concat(this.state.order.totalTTC, \"0\"), \"\\u20AC\"))))))), React.createElement(Grid, {\n        container: true,\n        justify: \"flex-end\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }, React.createElement(List, {\n        dense: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }, React.createElement(ListItem, {\n        divider: true,\n        style: {\n          paddingLeft: \"0.4rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316\n        },\n        __self: this\n      }, React.createElement(ListItemText, {\n        primary: \"Dont TVA 10%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }), React.createElement(ListItemSecondaryAction, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        gutterBottom: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }, this.getTotalVatTen(), \" \\u20AC\"))), React.createElement(ListItem, {\n        divider: true,\n        style: {\n          paddingLeft: \"0.4rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, React.createElement(ListItemText, {\n        primary: \"Dont TVA 20%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }), React.createElement(ListItemSecondaryAction, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        gutterBottom: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327\n        },\n        __self: this\n      }, this.getTotalVatTwenty(), \" \\u20AC\"))), React.createElement(ListItem, {\n        divider: true,\n        style: {\n          paddingLeft: \"0.4rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, React.createElement(ListItemText, {\n        primary: \"Total HT\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }), React.createElement(ListItemSecondaryAction, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        gutterBottom: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      }, this.state.order.totalHT, \"\\u20AC\")))))), React.createElement(Grid, {\n        container: true,\n        spacing: 8,\n        style: {\n          marginTop: \"1rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344\n        },\n        __self: this\n      }, order.state == 2 ? React.createElement(Button, {\n        component: Link,\n        to: \"#\",\n        fullWidth: true,\n        variant: \"contained\",\n        color: \"secondary\",\n        style: {\n          marginBottom: \"15px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }, React.createElement(Receipt, {\n        style: {\n          marginRight: \"0.4rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }), \"PDF\") : null), React.createElement(Grid, {\n        item: true,\n        xs: 9,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"body1\",\n        align: \"right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }, \"Paiement par carte bleue\"))))));\n    }\n  }]);\n\n  return OrderBill;\n}(Component);\n\nexport default OrderBill;","map":{"version":3,"sources":["/home/findev/Documents/lyon-0218-js-zappo/front/src/components/OrderBill.js"],"names":["React","Component","Link","moment","OrderBillChip","Paper","Grid","Button","Typography","Divider","List","ListItem","ListItemText","ListItemSecondaryAction","Icon","Receipt","axios","config","logoBill","OrderBill","props","state","order","reductions","zappoAddress","street","cp","city","phone","getNewPoints","bind","fillTheList","getSubTotal","getReductions","getTotalPrice","getTotalVatTen","getTotalVatTwenty","number","numberToRound","Math","round","pizzas","cart","map","element","category_id","quantity","JSON","parse","localStorage","getItem","cartItem","r","id","carts","index","filter","val","indexOf","console","log","length","i","c","orderedProducts","allInclusivePrice","ttc_price","divider","paddingLeft","name","magicRound","subTotal","tab","forEach","elt","free","push","reduce","a","b","tva","ht_price","lenght","tabReduc","reduc","total","orderId","user","then","res","setState","data","marginTop","padding","marginBottom","backToCart","uid","pending_time","format","width","textAlign","fontSize","totalTTC","totalHT","marginRight"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport moment from \"moment\";\nimport { OrderBillChip } from \"../styled/Index\";\n// MATERIAL UI\nimport {\n  Paper,\n  Grid,\n  Button,\n  Typography,\n  Divider,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemSecondaryAction,\n  Icon\n} from \"@material-ui/core\";\nimport { Receipt } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport config from \"../assets/lib/axiosConfig\";\n\n// ASSETS\nimport logoBill from \"../assets/img/zappoLogoSmall.png\";\n\nclass OrderBill extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      order: {},\n      reductions: \"\",\n      zappoAddress: {\n        street: \"6 rue Challemel Lacour\",\n        cp: 69007,\n        city: \"Lyon\",\n        phone: \"04 72 71 79 88\"\n      }\n    };\n    this.getNewPoints = this.getNewPoints.bind(this);\n    this.fillTheList = this.fillTheList.bind(this);\n    this.getSubTotal = this.getSubTotal.bind(this);\n    this.getReductions = this.getReductions.bind(this);\n    this.getTotalPrice = this.getTotalPrice.bind(this);\n    this.getTotalVatTen = this.getTotalVatTen.bind(this);\n    this.getTotalVatTwenty = this.getTotalVatTwenty.bind(this);\n  }\n\n  magicRound(number) {\n    let numberToRound = number * 100; // 556.845\n    numberToRound = Math.round(numberToRound); // 556\n    return (numberToRound = numberToRound / 100);\n  }\n\n  getNewPoints() {\n    let pizzas = 0;\n    if (this.state.order.cart) {\n      this.state.order.cart.map(element => {\n        return element.category_id === 1 ? (pizzas += element.quantity) : null;\n      });\n      return pizzas;\n    }\n  }\n  backToCart() {\n    let cart = [];\n    cart = JSON.parse(localStorage.getItem(\"cart\"));\n    const cartItem = this.state.order.cart.map(r => r.id);\n    const carts = cart.map(r => r.id);\n    let index = cartItem.filter(val => carts.indexOf(val) !== -1);\n    console.log(index, cartItem);\n    if (index.length === 0) {\n      cart = [...cart, ...this.state.order.cart];\n    } else {\n      let i = index.map(i => i);\n      cart = carts.map(c => c === 1);\n    }\n  }\n  // const index = carts.findIndex(elt => elt === cartItem);\n  // console.log(index);\n  // cart = [...this.state.order.cart, ...cart];\n  // localStorage.setItem(\"cart\", JSON.stringify(cart));\n\n  // const index = state.findIndex(el => el.item.title === action.item.title);\n  // if (index === -1) {\n  //   return [...state, { item: action.item, quantity: action.quantity + 1 }];\n  // } else {\n  //   return state.map((item, i) =>\n  //     index === i\n  //       ? {\n  //           ...item,\n  //           quantity: item.quantity + action.quantity + 1\n  //         }\n  //       : item\n  //   );\n  // }\n\n  fillTheList() {\n    const orderedProducts = this.state.order.cart;\n    if (orderedProducts) {\n      return orderedProducts.map((element, i) => {\n        const allInclusivePrice = element.ttc_price;\n        const divider =\n          element === orderedProducts[orderedProducts.length - 1]\n            ? false\n            : true;\n        return (\n          <ListItem divider={divider} style={{ paddingLeft: \"0.4rem\" }} key={i}>\n            <ListItemText\n              primary={`${element.quantity} ${element.name}`}\n              secondary={`(Pu: ${this.magicRound(allInclusivePrice)}0)`}\n            />\n            <ListItemSecondaryAction>\n              <Typography gutterBottom>\n                {`${this.magicRound(allInclusivePrice * element.quantity)}0 €`}\n              </Typography>\n            </ListItemSecondaryAction>\n          </ListItem>\n        );\n      });\n    }\n  }\n  /** Sous total de prix TTC avant calcul de reductions */\n  getSubTotal() {\n    let subTotal = 0;\n    this.state.order.cart.map(\n      element => (subTotal += element.ttc_price * element.quantity)\n    );\n    return subTotal;\n  }\n  /** Total de réductions TTC */\n  getReductions() {\n    if (this.state.order.cart) {\n      const tab = [];\n      this.state.order.cart.forEach(elt => {\n        if (elt.free) {\n          tab.push(elt.ttc_price * elt.free);\n        }\n      });\n      return tab.length > 1 ? tab.reduce((a, b) => a + b) : null;\n    }\n  }\n\n  /** Total des articles dont la TVA est 10 */\n  getTotalVatTen() {\n    const tab = [];\n    if (this.state.order.cart) {\n      this.state.order.cart.forEach(element => {\n        if (element.tva === 10) {\n          tab.push(\n            this.magicRound(element.ttc_price - element.ht_price) *\n              element.quantity\n          );\n        }\n      });\n      return tab.lenght >= 1 ? tab.reduce((a, b) => a + b) : 0;\n    }\n  }\n  /** Total des articles dont la TVA est 20 */\n  getTotalVatTwenty() {\n    const tab = [];\n    if (this.state.order.cart) {\n      this.state.order.cart.forEach(element => {\n        if (element.tva === 20) {\n          tab.push(\n            this.magicRound(element.ttc_price - element.ht_price) *\n              element.quantity\n          );\n        }\n      });\n      return tab.length >= 1 ? tab.reduce((a, b) => a + b) : 0;\n    }\n  }\n\n  getTotalHt() {\n    if (this.state.order.cart) {\n      const tab = this.state.order.cart.map(elt => elt.ht_price * elt.quantity);\n      return tab.length > 1 ? tab.reduce((a, b) => a + b) : 0;\n    }\n  }\n\n  /** Total net TTC (total moins les réductions éventuelles) */\n  getTotalPrice(cart = []) {\n    let tabReduc = [];\n    const tab = [];\n    cart.forEach(elt => {\n      if (!elt.free) {\n        tabReduc.push(elt.free);\n      }\n      tab.push(elt.ttc_price * elt.quantity);\n    });\n\n    const reduc = tabReduc.length ? tabReduc.reduce((a, b) => a + b, 0) : 0;\n    const total = tab.length ? tab.reduce((a, b) => a + b) : 0;\n\n    return total - reduc;\n  }\n\n  componentDidMount() {\n    axios(\n      config({}, `/order/${this.props.orderId}/${this.props.user.id}/`, \"get\")\n    ).then(res => {\n      this.setState({\n        order: res.data\n      });\n      this.props.order(res.data);\n    });\n  }\n  render() {\n    const { order, zappoAddress } = this.state;\n\n    return (\n      <Grid container justify=\"center\">\n        <Grid item xs={11}>\n          {order && (\n            <Paper\n              style={{\n                marginTop: \"1rem\",\n                padding: \"15px\",\n                marginBottom: \"1rem\"\n              }}\n            >\n              <Button\n                component={Link}\n                onClick={() => this.backToCart()}\n                to=\"#\"\n                fullWidth\n                variant=\"contained\"\n                size=\"large\"\n                color=\"secondary\"\n                style={{ marginBottom: \"15px\" }}\n              >\n                Remettre au panier\n              </Button>\n              <Grid container>\n                <Grid item xs={6}>\n                  <Typography align=\"left\" variant=\"body1\" gutterBottom>\n                    N°{order.uid}\n                  </Typography>\n                </Grid>\n                <Grid item xs={6}>\n                  <Typography align=\"right\" variant=\"body1\" gutterBottom>\n                    {moment(order.pending_time).format(\"dddd DD MMMM à LT\")}\n                  </Typography>\n                </Grid>\n              </Grid>\n              <Divider />\n              <Grid\n                container\n                spacing={8}\n                style={{ marginTop: \"0.5rem\" }}\n                alignItems=\"center\"\n              >\n                <Grid item xs={4}>\n                  <img src={logoBill} alt=\"Zappo\" style={{ width: \"100%\" }} />\n                </Grid>\n                <Grid item xs={8}>\n                  <Typography align=\"left\" variant=\"caption\">\n                    {zappoAddress.street}\n                    <br />\n                    {zappoAddress.cp} {zappoAddress.city}\n                    <br />\n                    {zappoAddress.phone}\n                  </Typography>\n                </Grid>\n              </Grid>\n              <Grid container alignItems=\"center\" style={{ marginTop: \"1rem\" }}>\n                <Divider />\n                <Grid item xs={6}>\n                  <Typography align=\"left\" variant=\"body1\" color=\"primary\">\n                    <Icon style={{ textAlign: \"baseline\", fontSize: \"0.9rem\" }}>\n                      local_pizza\n                    </Icon>\n                    <strong>+ {this.getNewPoints()} pts</strong>\n                  </Typography>\n                </Grid>\n                <Grid item xs={6}>\n                  <OrderBillChip label={` ${this.state.order.totalTTC}0 €`} />\n                  {/* label={`${this.magicRound(\n                    this.getTotalPrice(order.cart)\n                  )} €`}\n                 */}\n                </Grid>\n                <Grid item xs={12}>\n                  <List dense={true}>{this.fillTheList()} </List>\n                  <List dense={true}>\n                    <ListItem divider style={{ paddingLeft: \"0.4rem\" }}>\n                      <ListItemText primary=\"Sous-Total\" />\n                      <ListItemSecondaryAction>\n                        <Typography gutterBottom>\n                          {`${this.state.order.totalTTC}0`} €\n                        </Typography>\n                      </ListItemSecondaryAction>\n                    </ListItem>\n                    <ListItem divider style={{ paddingLeft: \"0.4rem\" }}>\n                      <ListItemText primary=\"Réduction\" />\n                      <ListItemSecondaryAction>\n                        <Typography gutterBottom>\n                          {/* {`- ${this.magicRound(this.getReductions())} €`} */}\n                          0 €\n                        </Typography>\n                      </ListItemSecondaryAction>\n                    </ListItem>\n                    <ListItem divider style={{ paddingLeft: \"0.4rem\" }}>\n                      <ListItemText primary={<strong>Total TTC</strong>} />\n                      <ListItemSecondaryAction>\n                        <Typography gutterBottom>\n                          <strong>{`${this.state.order.totalTTC}0`}€</strong>\n                        </Typography>\n                      </ListItemSecondaryAction>\n                    </ListItem>\n                  </List>\n                </Grid>\n              </Grid>\n              {/* CARTOUCHE AVEC LE DETAIL DES TAUX DE TVA */}\n              <Grid container justify=\"flex-end\">\n                <Grid item xs={8}>\n                  <List dense={true}>\n                    <ListItem divider style={{ paddingLeft: \"0.4rem\" }}>\n                      <ListItemText primary=\"Dont TVA 10%\" />\n                      <ListItemSecondaryAction>\n                        <Typography gutterBottom>\n                          {this.getTotalVatTen()} €\n                        </Typography>\n                      </ListItemSecondaryAction>\n                    </ListItem>\n                    <ListItem divider style={{ paddingLeft: \"0.4rem\" }}>\n                      <ListItemText primary=\"Dont TVA 20%\" />\n                      <ListItemSecondaryAction>\n                        <Typography gutterBottom>\n                          {this.getTotalVatTwenty()} €\n                        </Typography>\n                      </ListItemSecondaryAction>\n                    </ListItem>\n                    <ListItem divider style={{ paddingLeft: \"0.4rem\" }}>\n                      <ListItemText primary=\"Total HT\" />\n                      <ListItemSecondaryAction>\n                        <Typography gutterBottom>\n                          {this.state.order.totalHT}€\n                        </Typography>\n                      </ListItemSecondaryAction>\n                    </ListItem>\n                  </List>\n                </Grid>\n              </Grid>\n              <Grid container spacing={8} style={{ marginTop: \"1rem\" }}>\n                <Grid item xs={3}>\n                  {order.state == 2 ? (\n                    <Button\n                      component={Link}\n                      to=\"#\"\n                      fullWidth\n                      variant=\"contained\"\n                      color=\"secondary\"\n                      style={{ marginBottom: \"15px\" }}\n                    >\n                      <Receipt style={{ marginRight: \"0.4rem\" }} />\n                      PDF\n                    </Button>\n                  ) : null}\n                </Grid>\n                <Grid item xs={9}>\n                  <Typography variant=\"body1\" align=\"right\">\n                    Paiement par carte bleue\n                  </Typography>\n                </Grid>\n              </Grid>\n            </Paper>\n          )}\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nexport default OrderBill;\n"]},"metadata":{},"sourceType":"module"}