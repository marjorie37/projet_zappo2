{"ast":null,"code":"import _classCallCheck from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/findev/Documents/lyon-0218-js-zappo/front/src/components/BasketComponents/FooterPrice.js\";\nimport React, { Component } from \"react\";\nimport { Grid, Button, Typography } from \"@material-ui/core\";\nimport { Payment } from \"@material-ui/icons\";\nimport { StyledFooterPrice } from \"../../styled/StyledNotifCard\";\n\nvar FooterPrice =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FooterPrice, _Component);\n\n  function FooterPrice(props) {\n    var _this;\n\n    _classCallCheck(this, FooterPrice);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FooterPrice).call(this, props));\n    _this.state = {\n      totalTTC: 0,\n      tvaTen: 0,\n      tvaTwenty: 0,\n      totalHT: 0\n    };\n    _this.getHT = _this.getHT.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getHTPercent = _this.getHTPercent.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getTotalTTC = _this.getTotalTTC.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.redirectTo = _this.redirectTo.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getTotalHT = _this.getTotalHT.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(FooterPrice, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      localStorage.setItem(\"TTC\", this.getTotalTTC());\n      localStorage.setItem(\"HT\", this.getTotalHT());\n    }\n  }, {\n    key: \"getHT\",\n    value: function getHT() {\n      var sommes = this.props.products.map(function (product) {\n        return product.ht_price * product.quantity;\n      });\n      var total = sommes.reduce(function (acc, current) {\n        return acc + current;\n      }, 0);\n      return Math.round(total * 100) / 100;\n    }\n  }, {\n    key: \"getHTPercent\",\n    value: function getHTPercent() {\n      var tva = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;\n      var sommes = this.props.products.filter(function (product) {\n        return product.tva === tva;\n      }).map(function (product) {\n        return product.ht_price * product.quantity * (tva / 100);\n      });\n      var total = sommes.reduce(function (acc, current) {\n        return acc + current;\n      }, 0);\n      return Math.round(total * 100) / 100;\n    }\n  }, {\n    key: \"getTotalTTC\",\n    value: function getTotalTTC() {\n      var sommes = this.props.products.reduce(function (ac, product) {\n        return ac + product.ttc_price * product.quantity;\n      }, 0);\n      return sommes.toFixed(2);\n    }\n  }, {\n    key: \"getTotalHT\",\n    value: function getTotalHT() {\n      var sommes = this.props.products.reduce(function (ac, product) {\n        return ac + product.ht_price * product.quantity;\n      }, 0);\n      return sommes.toFixed(2);\n    }\n  }, {\n    key: \"redirectTo\",\n    value: function redirectTo() {\n      var _this$props = this.props,\n          user = _this$props.user,\n          history = _this$props.history,\n          location = _this$props.location,\n          checkMessage = _this$props.checkMessage;\n\n      if (checkMessage()) {\n        if (!user) history.push(\"/identification/connexion\", {\n          url: location.pathname\n        });else history.push(\"/paiement\");\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var products = this.props.products;\n      return React.createElement(StyledFooterPrice, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"fab\",\n        color: \"secondary\",\n        onClick: this.redirectTo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(Payment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }))), React.createElement(Grid, {\n        container: true,\n        justify: \"flex-end\",\n        style: {\n          padding: \"0 20px 10px 20px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        justify: \"space-between\",\n        style: {\n          borderBottom: \"1px dotted #fff\",\n          paddingBottom: \"1rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"title\",\n        style: {\n          color: \"#fff\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"Total TTC\")), React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"title\",\n        align: \"right\",\n        style: {\n          color: \"#fff\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, products.length > 0 && this.getTotalTTC(), \" \\u20AC\"))), React.createElement(Grid, {\n        container: true,\n        justify: \"space-between\",\n        style: {\n          borderBottom: \"1px dotted #fff\",\n          padding: \"0.2rem 0rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"body1\",\n        style: {\n          color: \"#fff\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Dont TVA 10%\")), React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"body1\",\n        align: \"right\",\n        style: {\n          color: \"#fff\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, products.length > 0 && this.getHTPercent(10)))), React.createElement(Grid, {\n        container: true,\n        justify: \"space-between\",\n        style: {\n          borderBottom: \"1px dotted #fff\",\n          padding: \"0.2rem 0rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"body1\",\n        style: {\n          color: \"#fff\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"Dont TVA 20%\")), React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"body1\",\n        align: \"right\",\n        style: {\n          color: \"#fff\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, products.length > 0 && this.getHTPercent(20)))), React.createElement(Grid, {\n        container: true,\n        justify: \"space-between\",\n        style: {\n          padding: \"0.2rem 0rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"body1\",\n        style: {\n          color: \"#fff\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \"Total HT\")), React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"body1\",\n        align: \"right\",\n        style: {\n          color: \"#fff\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, products.length > 0 && this.getHT())))));\n    }\n  }]);\n\n  return FooterPrice;\n}(Component);\n\nexport default FooterPrice;","map":{"version":3,"sources":["/home/findev/Documents/lyon-0218-js-zappo/front/src/components/BasketComponents/FooterPrice.js"],"names":["React","Component","Grid","Button","Typography","Payment","StyledFooterPrice","FooterPrice","props","state","totalTTC","tvaTen","tvaTwenty","totalHT","getHT","bind","getHTPercent","getTotalTTC","redirectTo","getTotalHT","localStorage","setItem","sommes","products","map","product","ht_price","quantity","total","reduce","acc","current","Math","round","tva","filter","ac","ttc_price","toFixed","user","history","location","checkMessage","push","url","pathname","padding","borderBottom","paddingBottom","color","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Grid, Button, Typography } from \"@material-ui/core\";\n\nimport { Payment } from \"@material-ui/icons\";\nimport { StyledFooterPrice } from \"../../styled/StyledNotifCard\";\n\nclass FooterPrice extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      totalTTC: 0,\n      tvaTen: 0,\n      tvaTwenty: 0,\n      totalHT: 0\n    };\n    this.getHT = this.getHT.bind(this);\n    this.getHTPercent = this.getHTPercent.bind(this);\n    this.getTotalTTC = this.getTotalTTC.bind(this);\n    this.redirectTo = this.redirectTo.bind(this);\n    this.getTotalHT = this.getTotalHT.bind(this);\n  }\n\n  componentDidUpdate() {\n    localStorage.setItem(\"TTC\", this.getTotalTTC());\n    localStorage.setItem(\"HT\", this.getTotalHT());\n  }\n\n  getHT() {\n    const sommes = this.props.products.map(\n      product => product.ht_price * product.quantity\n    );\n    const total = sommes.reduce((acc, current) => {\n      return acc + current;\n    }, 0);\n\n    return Math.round(total * 100) / 100;\n  }\n\n  getHTPercent(tva = 10) {\n    const sommes = this.props.products\n      .filter(product => product.tva === tva)\n      .map(product => product.ht_price * product.quantity * (tva / 100));\n    const total = sommes.reduce((acc, current) => {\n      return acc + current;\n    }, 0);\n\n    return Math.round(total * 100) / 100;\n  }\n\n  getTotalTTC() {\n    const sommes = this.props.products.reduce(\n      (ac, product) => ac + product.ttc_price * product.quantity,\n      0\n    );\n    return sommes.toFixed(2);\n  }\n\n  getTotalHT() {\n    const sommes = this.props.products.reduce(\n      (ac, product) => ac + product.ht_price * product.quantity,\n      0\n    );\n    return sommes.toFixed(2);\n  }\n\n  redirectTo() {\n    const { user, history,location, checkMessage } = this.props;\n    if(checkMessage()){\n      if (!user) history.push(\"/identification/connexion\", {url:location.pathname})\n      else history.push(\"/paiement\");\n    }\n  }\n\n  render() {\n    const { products } = this.props;\n\n    return (\n      <StyledFooterPrice>\n        <div>\n          <Button variant=\"fab\" color=\"secondary\" onClick={this.redirectTo}>\n            <Payment />\n          </Button>\n        </div>\n\n        <Grid\n          container\n          justify=\"flex-end\"\n          style={{ padding: \"0 20px 10px 20px\" }}\n        >\n          <Grid\n            container\n            justify=\"space-between\"\n            style={{ borderBottom: \"1px dotted #fff\", paddingBottom: \"1rem\" }}\n          >\n            <Grid item xs={6}>\n              <Typography variant=\"title\" style={{ color: \"#fff\" }}>\n                Total TTC\n              </Typography>\n            </Grid>\n            <Grid item xs={6}>\n              <Typography\n                variant=\"title\"\n                align=\"right\"\n                style={{ color: \"#fff\" }}\n              >\n                {products.length > 0 && this.getTotalTTC()} â‚¬\n              </Typography>\n            </Grid>\n          </Grid>\n          {/* -------------------------- Dont TVA 10 -------------------------- */}\n          <Grid\n            container\n            justify=\"space-between\"\n            style={{\n              borderBottom: \"1px dotted #fff\",\n              padding: \"0.2rem 0rem\"\n            }}\n          >\n            <Grid item xs={6}>\n              <Typography variant=\"body1\" style={{ color: \"#fff\" }}>\n                Dont TVA 10%\n              </Typography>\n            </Grid>\n            <Grid item xs={6}>\n              <Typography\n                variant=\"body1\"\n                align=\"right\"\n                style={{ color: \"#fff\" }}\n              >\n                {products.length > 0 && this.getHTPercent(10)}\n              </Typography>\n            </Grid>\n          </Grid>\n          {/* -------------------------- Dont TVA 20 -------------------------- */}\n          <Grid\n            container\n            justify=\"space-between\"\n            style={{\n              borderBottom: \"1px dotted #fff\",\n              padding: \"0.2rem 0rem\"\n            }}\n          >\n            <Grid item xs={6}>\n              <Typography variant=\"body1\" style={{ color: \"#fff\" }}>\n                Dont TVA 20%\n              </Typography>\n            </Grid>\n            <Grid item xs={6}>\n              <Typography\n                variant=\"body1\"\n                align=\"right\"\n                style={{ color: \"#fff\" }}\n              >\n                {products.length > 0 && this.getHTPercent(20)}\n              </Typography>\n            </Grid>\n          </Grid>\n          {/* -------------------------- Total TTC -------------------------- */}\n          <Grid\n            container\n            justify=\"space-between\"\n            style={{\n              padding: \"0.2rem 0rem\"\n            }}\n          >\n            <Grid item xs={6}>\n              <Typography variant=\"body1\" style={{ color: \"#fff\" }}>\n                Total HT\n              </Typography>\n            </Grid>\n            <Grid item xs={6}>\n              <Typography\n                variant=\"body1\"\n                align=\"right\"\n                style={{ color: \"#fff\" }}\n              >\n                {products.length > 0 && this.getHT()}\n              </Typography>\n            </Grid>\n          </Grid>\n        </Grid>\n      </StyledFooterPrice>\n    );\n  }\n}\n\nexport default FooterPrice;\n"]},"metadata":{},"sourceType":"module"}