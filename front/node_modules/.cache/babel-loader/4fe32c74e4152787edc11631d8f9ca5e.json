{"ast":null,"code":"import _toConsumableArray from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/findev/Documents/lyon-0218-js-zappo/front/src/components/HomePageComponents/HomePageMainContent.js\";\nimport React from \"react\";\nimport SwipeableViews from \"react-swipeable-views\"; // MATERIAL UI\n\nimport { List, Tab, Tabs } from \"@material-ui/core\";\nimport { withStyles } from \"@material-ui/core/styles\"; // COMPONENTS\n\nimport HomePageItem from \"./HomePageItem\";\nimport Emitter from \"../../emitter\";\nimport { StyledHeaderMenu } from \"../../styled/StyledHeader\";\nimport { StyledMainContent } from \"../../styled/StyledMainContent\";\n\nvar GetProducts = function GetProducts(props) {\n  return React.createElement(HomePageItem, Object.assign({}, props, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15\n    },\n    __self: this\n  }));\n};\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      flexGrow: 1,\n      width: \"100%\",\n      backgroundColor: theme.palette.background.paper\n    },\n    width: {\n      width: \"100%\"\n    }\n  };\n};\n\nvar HomePageMainContent =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(HomePageMainContent, _React$Component);\n\n  function HomePageMainContent(props) {\n    var _this;\n\n    _classCallCheck(this, HomePageMainContent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(HomePageMainContent).call(this, props));\n    _this.state = {\n      value: 0,\n      products: [],\n      favorites: []\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChangeIndex = _this.handleChangeIndex.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.addProduct = _this.addProduct.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.restoreCart = _this.restoreCart.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.emitter = Emitter;\n    _this.getFavorites = _this.getFavorites.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.categoryFilter = _this.categoryFilter.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(HomePageMainContent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.restoreCart();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          theme = _this$props.theme,\n          products = _this$props.products;\n      var value = this.state.value;\n\n      var ListProducts = function ListProducts(_ref) {\n        var _ref$tab = _ref.tab,\n            tab = _ref$tab === void 0 ? [] : _ref$tab;\n        return React.createElement(List, {\n          component: \"ul\",\n          className: classes.width,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }, tab.map(function (el, i) {\n          return React.createElement(GetProducts, {\n            key: el + i,\n            product: el,\n            addProduct: _this2.addProduct,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 57\n            },\n            __self: this\n          });\n        }));\n      };\n\n      var favorites = this.props.products[1] !== undefined && this.getFavorites();\n      return React.createElement(\"div\", {\n        className: classes.root,\n        style: {\n          background: \"rgb(243, 243, 242)\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(StyledHeaderMenu, {\n        position: \"sticky\",\n        color: \"default\",\n        elevation: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(Tabs, {\n        value: value,\n        onChange: this.handleChange,\n        indicatorColor: \"primary\",\n        textColor: \"primary\",\n        scrollable: true,\n        scrollButtons: \"on\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(Tab, {\n        label: \"Suggestions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }), React.createElement(Tab, {\n        label: \"Entr\\xE9es\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }), React.createElement(Tab, {\n        label: \"Pizze\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }), React.createElement(Tab, {\n        label: \"Desserts\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }), React.createElement(Tab, {\n        label: \"Boissons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }))), React.createElement(StyledMainContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(SwipeableViews, {\n        axis: theme.direction === \"rtl\" ? \"x-reverse\" : \"x\",\n        index: value,\n        onChangeIndex: this.handleChangeIndex,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, value === 0 && React.createElement(ListProducts, {\n        tab: favorites.length > 0 ? favorites : products[0],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, value === 1 && React.createElement(ListProducts, {\n        tab: products[2],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, value === 2 && React.createElement(ListProducts, {\n        tab: products[1],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, value === 3 && React.createElement(ListProducts, {\n        tab: products[3],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, value === 4 && React.createElement(ListProducts, {\n        tab: products[4],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      })))));\n    }\n    /**\n     * ----------------------------- FONCTIONS --------------------------\n     */\n\n  }, {\n    key: \"restoreCart\",\n    value: function restoreCart() {\n      var tab = JSON.parse(localStorage.getItem(\"cart\"));\n\n      if (tab) {\n        this.setState({\n          products: tab\n        });\n      }\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event, value) {\n      this.setState({\n        value: value\n      });\n    }\n  }, {\n    key: \"handleChangeIndex\",\n    value: function handleChangeIndex(index) {\n      this.setState({\n        value: index\n      });\n    }\n  }, {\n    key: \"categoryFilter\",\n    value: function categoryFilter(category, filters) {\n      var filterKeys = Object.keys(filters); // filters all elements passing the criteria\n\n      return category.filter(function (item) {\n        // dynamically validate all filter criteria\n        return filterKeys.every(function (key) {\n          return !!~filters[key].indexOf(item[key]);\n        });\n      });\n    }\n  }, {\n    key: \"getFavorites\",\n    value: function getFavorites() {\n      var filters = {\n        favorites: [true]\n      };\n      var favoritesTab = [];\n\n      for (var i = 1; i < 5; i++) {\n        var tmpFavorites = this.categoryFilter(this.props.products[i], filters);\n        favoritesTab.push.apply(favoritesTab, _toConsumableArray(tmpFavorites));\n      }\n\n      return favoritesTab;\n    }\n  }, {\n    key: \"addProduct\",\n    value: function addProduct(object) {\n      var cart = JSON.parse(localStorage.getItem(\"cart\", []));\n\n      if (cart === null) {\n        cart = [];\n      }\n\n      var index = cart.findIndex(function (product) {\n        return product.id === object.id;\n      });\n\n      if (index >= 0) {\n        cart[index].quantity = cart[index].quantity + 1;\n      } else {\n        cart.push(object);\n      }\n\n      var stringify = JSON.stringify(cart);\n      localStorage.setItem(\"cart\", stringify);\n      this.emitter.emit(\"refreshCart\");\n    }\n  }]);\n\n  return HomePageMainContent;\n}(React.Component);\n\nexport default withStyles(styles, {\n  withTheme: true\n})(HomePageMainContent);","map":{"version":3,"sources":["/home/findev/Documents/lyon-0218-js-zappo/front/src/components/HomePageComponents/HomePageMainContent.js"],"names":["React","SwipeableViews","List","Tab","Tabs","withStyles","HomePageItem","Emitter","StyledHeaderMenu","StyledMainContent","GetProducts","props","styles","theme","root","flexGrow","width","backgroundColor","palette","background","paper","HomePageMainContent","state","value","products","favorites","handleChange","bind","handleChangeIndex","addProduct","restoreCart","emitter","getFavorites","categoryFilter","classes","ListProducts","tab","map","el","i","undefined","direction","length","JSON","parse","localStorage","getItem","setState","event","index","category","filters","filterKeys","Object","keys","filter","item","every","key","indexOf","favoritesTab","tmpFavorites","push","object","cart","findIndex","product","id","quantity","stringify","setItem","emit","Component","withTheme"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport SwipeableViews from \"react-swipeable-views\";\n\n// MATERIAL UI\nimport { List, Tab, Tabs } from \"@material-ui/core\";\nimport { withStyles } from \"@material-ui/core/styles\";\n\n// COMPONENTS\nimport HomePageItem from \"./HomePageItem\";\nimport Emitter from \"../../emitter\";\nimport { StyledHeaderMenu } from \"../../styled/StyledHeader\";\nimport { StyledMainContent } from \"../../styled/StyledMainContent\";\n\nconst GetProducts = props => {\n  return <HomePageItem {...props} />;\n};\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n    width: \"100%\",\n    backgroundColor: theme.palette.background.paper\n  },\n  width: {\n    width: \"100%\"\n  }\n});\n\nclass HomePageMainContent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: 0,\n      products: [],\n      favorites: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeIndex = this.handleChangeIndex.bind(this);\n    this.addProduct = this.addProduct.bind(this);\n    this.restoreCart = this.restoreCart.bind(this);\n    this.emitter = Emitter;\n    this.getFavorites = this.getFavorites.bind(this);\n    this.categoryFilter = this.categoryFilter.bind(this);\n  }\n\n  componentDidMount() {\n    this.restoreCart();\n  }\n\n  render() {\n    const { classes, theme, products } = this.props;\n    const { value } = this.state;\n    const ListProducts = ({ tab = [] }) => (\n      <List component=\"ul\" className={classes.width}>\n        {tab.map((el, i) => {\n          return (\n            <GetProducts\n              key={el + i}\n              product={el}\n              addProduct={this.addProduct}\n            />\n          );\n        })}\n      </List>\n    );\n    const favorites =\n      this.props.products[1] !== undefined && this.getFavorites();\n\n    return (\n      <div\n        className={classes.root}\n        style={{ background: \"rgb(243, 243, 242)\" }}\n      >\n        <StyledHeaderMenu position=\"sticky\" color=\"default\" elevation={6}>\n          <Tabs\n            value={value}\n            onChange={this.handleChange}\n            indicatorColor=\"primary\"\n            textColor=\"primary\"\n            scrollable\n            scrollButtons=\"on\"\n          >\n            <Tab label=\"Suggestions\" />\n            <Tab label=\"EntrÃ©es\" />\n            <Tab label=\"Pizze\" />\n            <Tab label=\"Desserts\" />\n            <Tab label=\"Boissons\" />\n          </Tabs>\n        </StyledHeaderMenu>\n        <StyledMainContent>\n          <SwipeableViews\n            axis={theme.direction === \"rtl\" ? \"x-reverse\" : \"x\"}\n            index={value}\n            onChangeIndex={this.handleChangeIndex}\n          >\n            <div>\n              {value === 0 && (\n                <ListProducts\n                  tab={favorites.length > 0 ? favorites : products[0]}\n                />\n              )}\n            </div>\n            <div>{value === 1 && <ListProducts tab={products[2]} />}</div>\n            <div>{value === 2 && <ListProducts tab={products[1]} />}</div>\n            <div>{value === 3 && <ListProducts tab={products[3]} />}</div>\n            <div>{value === 4 && <ListProducts tab={products[4]} />}</div>\n          </SwipeableViews>\n        </StyledMainContent>\n      </div>\n    );\n  }\n\n  /**\n   * ----------------------------- FONCTIONS --------------------------\n   */\n  restoreCart() {\n    const tab = JSON.parse(localStorage.getItem(\"cart\"));\n    if (tab) {\n      this.setState({\n        products: tab\n      });\n    }\n  }\n\n  handleChange(event, value) {\n    this.setState({ value });\n  }\n\n  handleChangeIndex(index) {\n    this.setState({ value: index });\n  }\n\n  categoryFilter(category, filters) {\n    const filterKeys = Object.keys(filters);\n    // filters all elements passing the criteria\n    return category.filter(item => {\n      // dynamically validate all filter criteria\n      return filterKeys.every(key => !!~filters[key].indexOf(item[key]));\n    });\n  }\n\n  getFavorites() {\n    let filters = { favorites: [true] };\n    let favoritesTab = [];\n    for (let i = 1; i < 5; i++) {\n      let tmpFavorites = this.categoryFilter(this.props.products[i], filters);\n      favoritesTab.push(...tmpFavorites);\n    }\n    return favoritesTab;\n  }\n\n  addProduct(object) {\n    let cart = JSON.parse(localStorage.getItem(\"cart\", []));\n    if (cart === null) {\n      cart = [];\n    }\n    const index = cart.findIndex(product => product.id === object.id);\n\n    if (index >= 0) {\n      cart[index].quantity = cart[index].quantity + 1;\n    } else {\n      cart.push(object);\n    }\n    const stringify = JSON.stringify(cart);\n    localStorage.setItem(\"cart\", stringify);\n\n    this.emitter.emit(\"refreshCart\");\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(HomePageMainContent);\n"]},"metadata":{},"sourceType":"module"}