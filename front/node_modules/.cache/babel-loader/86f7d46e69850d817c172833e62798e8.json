{"ast":null,"code":"import _toConsumableArray from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/findev/Documents/lyon-0218-js-zappo/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/findev/Documents/lyon-0218-js-zappo/front/src/components/BasketComponents/RewardPoints.js\";\nimport React, { Component } from \"react\";\nimport { Star } from \"@material-ui/icons\";\nimport { withTheme, Typography } from \"@material-ui/core\";\nimport Emitter from \"../../emitter\";\nimport { StyledReward } from \"../../styled/StyledReward\";\n\nvar RewardPoints =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RewardPoints, _Component);\n\n  function RewardPoints(props) {\n    var _this;\n\n    _classCallCheck(this, RewardPoints);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RewardPoints).call(this, props));\n    _this.state = {\n      points: 0\n    };\n    _this.calculatePoint = _this.calculatePoint.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.emitter = Emitter;\n\n    _this.emitter.addListener(\"refreshCart\", _this.calculatePoint);\n\n    return _this;\n  }\n\n  _createClass(RewardPoints, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.calculatePoint();\n    }\n  }, {\n    key: \"calculatePoint\",\n    value: function calculatePoint() {\n      var tab = JSON.parse(localStorage.getItem(\"cart\"));\n\n      if (tab) {\n        var nb = tab.filter(function (elt) {\n          return elt.category_id === 1;\n        }).reduce(function (acc, elt) {\n          return acc + elt.quantity;\n        }, 0);\n        localStorage.setItem('fidelity', nb);\n        this.setState({\n          points: nb\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(StyledReward, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"body1\",\n        component: \"p\",\n        style: this.props.theme.infoColor,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }, \"[ + \", this.state.points, \" points de fid\\xE9lit\\xE9\", this.state.points >= 8 ? \"  \\uD83D\\uDE0A\" : _toConsumableArray(Array(this.state.points)).map(function (point, index) {\n        return React.createElement(\"span\", {\n          key: \"starX\" + index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        }, React.createElement(Star, {\n          style: {\n            marginLeft: \"0.5rem\",\n            fontSize: \"0.8rem\",\n            verticalAlign: \"baseline\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }));\n      }), \" \", \"]\"));\n    }\n  }]);\n\n  return RewardPoints;\n}(Component);\n\nexport default withTheme()(RewardPoints);","map":{"version":3,"sources":["/home/findev/Documents/lyon-0218-js-zappo/front/src/components/BasketComponents/RewardPoints.js"],"names":["React","Component","Star","withTheme","Typography","Emitter","StyledReward","RewardPoints","props","state","points","calculatePoint","bind","emitter","addListener","tab","JSON","parse","localStorage","getItem","nb","filter","elt","category_id","reduce","acc","quantity","setItem","setState","theme","infoColor","Array","map","point","index","marginLeft","fontSize","verticalAlign"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,oBAArB;AACA,SAASC,SAAT,EAAoBC,UAApB,QAAsC,mBAAtC;AACA,OAAOC,OAAP,MAAoB,eAApB;AACA,SAASC,YAAT,QAA6B,2BAA7B;;IAEMC,Y;;;;;AACJ,wBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,sFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACXC,MAAAA,MAAM,EAAE;AADG,KAAb;AAGA,UAAKC,cAAL,GAAsB,MAAKA,cAAL,CAAoBC,IAApB,uDAAtB;AACA,UAAKC,OAAL,GAAeR,OAAf;;AACA,UAAKQ,OAAL,CAAaC,WAAb,CAAyB,aAAzB,EAAwC,MAAKH,cAA7C;;AAPiB;AAQlB;;;;wCAEmB;AAClB,WAAKA,cAAL;AACD;;;qCAEgB;AACf,UAAMI,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAZ;;AACA,UAAIJ,GAAJ,EAAS;AACP,YAAMK,EAAE,GAAGL,GAAG,CACXM,MADQ,CACD,UAAAC,GAAG;AAAA,iBAAIA,GAAG,CAACC,WAAJ,KAAoB,CAAxB;AAAA,SADF,EAERC,MAFQ,CAED,UAACC,GAAD,EAAMH,GAAN;AAAA,iBAAcG,GAAG,GAAGH,GAAG,CAACI,QAAxB;AAAA,SAFC,EAEiC,CAFjC,CAAX;AAGAR,QAAAA,YAAY,CAACS,OAAb,CAAqB,UAArB,EAAgCP,EAAhC;AACA,aAAKQ,QAAL,CAAc;AACZlB,UAAAA,MAAM,EAAEU;AADI,SAAd;AAGD;AACF;;;6BACQ;AACP,aACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,UAAD;AACE,QAAA,OAAO,EAAC,OADV;AAEE,QAAA,SAAS,EAAC,GAFZ;AAGE,QAAA,KAAK,EAAE,KAAKZ,KAAL,CAAWqB,KAAX,CAAiBC,SAH1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAKO,KAAKrB,KAAL,CAAWC,MALlB,+BAMG,KAAKD,KAAL,CAAWC,MAAX,IAAqB,CAArB,GACG,gBADH,GAEG,mBAAIqB,KAAK,CAAC,KAAKtB,KAAL,CAAWC,MAAZ,CAAT,EAA8BsB,GAA9B,CAAkC,UAACC,KAAD,EAAQC,KAAR;AAAA,eAClC;AAAM,UAAA,GAAG,EAAG,UAAUA,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,oBAAC,IAAD;AACE,UAAA,KAAK,EAAE;AACLC,YAAAA,UAAU,EAAE,QADP;AAELC,YAAAA,QAAQ,EAAE,QAFL;AAGLC,YAAAA,aAAa,EAAE;AAHV,WADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,CADkC;AAAA,OAAlC,CARN,EAkBU,GAlBV,MADF,CADF;AAyBD;;;;EArDwBpC,S;;AAwD3B,eAAeE,SAAS,GAAGI,YAAH,CAAxB","sourcesContent":["import React, { Component } from \"react\";\nimport { Star } from \"@material-ui/icons\";\nimport { withTheme, Typography } from \"@material-ui/core\";\nimport Emitter from \"../../emitter\";\nimport { StyledReward } from \"../../styled/StyledReward\";\n\nclass RewardPoints extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      points: 0\n    };\n    this.calculatePoint = this.calculatePoint.bind(this);\n    this.emitter = Emitter;\n    this.emitter.addListener(\"refreshCart\", this.calculatePoint);\n  }\n\n  componentDidMount() {\n    this.calculatePoint();\n  }\n\n  calculatePoint() {\n    const tab = JSON.parse(localStorage.getItem(\"cart\"));\n    if (tab) {\n      const nb = tab\n        .filter(elt => elt.category_id === 1)\n        .reduce((acc, elt) => acc + elt.quantity, 0);\n      localStorage.setItem('fidelity',nb)\n      this.setState({\n        points: nb\n      });\n    }\n  }\n  render() {\n    return (\n      <StyledReward>\n        <Typography\n          variant=\"body1\"\n          component=\"p\"\n          style={this.props.theme.infoColor}\n        >\n          [ + {this.state.points} points de fidélité\n          {this.state.points >= 8\n            ? \"  \\u{1F60A}\"\n            : [...Array(this.state.points)].map((point, index) => (\n              <span key={ \"starX\" + index}>\n                  <Star\n                    style={{\n                      marginLeft: \"0.5rem\",\n                      fontSize: \"0.8rem\",\n                      verticalAlign: \"baseline\"\n                    }}\n                  />\n                </span>\n              ))}{\" \"}\n          ]\n        </Typography>\n      </StyledReward>\n    );\n  }\n}\n\nexport default withTheme()(RewardPoints);\n"]},"metadata":{},"sourceType":"module"}